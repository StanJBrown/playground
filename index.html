<!DOCTYPE html>
<html>
<head>
    <title>playground - docs</title>
    <!-- LiveReload -->
    <!-- <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script> -->

    <!-- MATHJAX -->
    <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
                TeX: { equationNumbers: { autoNumber: "AMS" }}
            });
    </script>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
    </script>

    <!-- Marked -->
    <script src="./js/marked.min.js"></script>

    <!-- JQuery -->
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

    <!-- CSS -->
    <style>
        body {
            color: #333;
            margin: 0;
            padding: 0;

            font-family: Verdana, Arial;
            font-size: 1em;
        }

        #wrapper {
            position: relative;
            width: 950px;
        }

        #sidebar {
            position: fixed;
            width: 220px;
            height: 100%;

            overflow-y: scroll;
            overflow: -moz-scrollbars-vertical;

            margin-right: 20px;
            margin-top: 0;
            padding-left: 25px;
            padding-top: 0;

            box-shadow: 0 0 40px #CCC;
            -webkit-box-shadow: 0 0 40px #CCC;
            -moz-box-shadow: 0 0 40px #CCC;
            border-right: 1px solid #BBB;
        }

        #sidebar .title {

        }

        #sidebar h1 {
            font-size: 25px;
        }

        #sidebar h1 a:link, #sidebar h1 a:visited {
            color: #333;
        }

        #sidebar h2 {
            font-size: 13px;
        }

        #sidebar a:visited, #sidebar a:link {
            color: #4682BE;
            text-decoration: none;
        }

        #sidebar ul {
            list-style-type: none;
            margin: 0;
            padding-left: 10px;
        }

        #sidebar ul li:before {  /* a hack to have dashes as a list style */
            content: "-";
            position: relative;
            left: -5px;
        }

        #sidebar ul li {
            margin-bottom: 2px;
            margin-left: 10px;

            text-indent: -5px;  /* to compensate for the padding for the dash */
            font-size: 12px;
        }

        #content {
            width: 600px;

            margin-left: 310px;
            padding-top: 10px;
            padding-bottom: 150px;

            text-align: justify;
            font-size: 12px;

            /* border: 1px solid black; */
        }

        #content pre {
            width: 95%;

            margin-left: auto;
            margin-right: auto;
            padding: 10px;

            color: #EEE;
            font-size: 10px;
            font-weight: normal;
            font-family: Consolas, monospace;

            background: #333;
            border-radius: 10px;
        }

        #content h2 {
            margin-top: 30px;
        }

        #content h3 {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px dotted #777;
        }

        #content img {
            max-width: 90%;
            display: block;

            margin-left: auto;
            margin-right: auto;

            border-radius: 5px;
        }

        #content ul {
            list-style-type: none;
        }

        #content ul li:before {  /* a hack to have dashes as a list style */
            content: "-";
            position: relative;
            left: -5px;
        }

        #content ul li {
            text-indent: -5px;  /* to compensate for the padding for the dash */
        }

        #content ul li.link {
            color: #4682BE;
            text-decoration: none;
            cursor: pointer;
        }

        #content a:link, #content a:visited {
            color: #4682BE;
            text-decoration: none;
        }

        .clear {
            clear: both;

        }


    </style>
</head>
<body>
    <div id="wrapper">
        <div id="sidebar"></div>
        <div id="content"></div>
        <div class="clear"></div>
    </div>
    <script>
        function init_sidebar() {
            $.get("pages/sidebar.md", function(data) {
                $("#sidebar").html(marked(data));
            }, "text");
        }

        function init_content() {
            $.get("README.md", function(data) {
                $("#content").html(marked(data));
            }, "text");
        }

        function show_error() {
            $.get("pages/404.md", function(data) {
                $("#content").html(marked(data));
            }, "text");
        }

        function replace_symbols(text) {
            // replace symbols with underscore
            return text.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g, "_")
        }

        function li_create_linkage(li_tag, header_level) {
            // add custom id and class attributes
            html_safe_tag = replace_symbols(li_tag.text());
            li_tag.attr("id", html_safe_tag);
            li_tag.attr("class", "link");

            // add click listener - on click scroll to relevant header section
            $("#content li#" + li_tag.attr("id")).click(function() {
                var header = $("#content h" + header_level + "." + li_tag.attr("id"));
                $('html body').animate({
                    scrollTop: header.offset().top
                }, 200);
            });
        }

        function create_page_anchors() {
            // create page anchors by matching headers with li's
            // if there is a match, create javascript click listeners
            // and scroll to relevant sections

            // go through header level 2 and 3
            for (var i = 2; i <= 4; i++) {
                // parse all headers
                var headers = [];
                $('#content h' + i).map(function() {
                    headers.push($(this).text());
                    $(this).addClass(replace_symbols($(this).text()));
                });

                // parse and set links between li and h2
                $('#content ul li').map(function() {
                    for (var j = 0; j < headers.length; j++) {
                        if (headers[j] === $(this).text()) {
                            li_create_linkage($(this), i);
                        }
                    }
                });
            }
        }

        function router() {
            var path = location.hash.replace("#", "./");

            // default page if hash is empty
            if (path === "") {
                path = "#README.md";
            }

            $.get(path, function(data) {
                var doc = marked(data)
                $("#content").html(doc);
                create_page_anchors();
            }).fail(show_error);
        }

        $(document).ready(function() {
            init_sidebar();
            init_content();

            $(window).on('hashchange', router);
        });
    </script>
</body>
</html>
